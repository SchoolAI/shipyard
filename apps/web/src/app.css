@import "tailwindcss";
@import "@heroui/styles";

html, body {
  overflow: hidden;
}

/*
 * Shipyard Theme
 *
 * Palette derived from the Shipyard logo:
 *   - Rust/copper containers  -> accent
 *   - Teal/cyan ocean waves   -> secondary (used for links, info)
 *   - Dark navy hull          -> backgrounds
 *   - Steel blue tower        -> muted text
 *
 * HeroUI v3 variables are set on .dark / .light and [data-theme] selectors.
 * Both dark and light themes use Shipyard palette colors.
 */

/* -- Dark theme overrides (Shipyard is dark-first) -- */
.dark,
[data-theme="dark"] {
  /* Base: deep navy from the ship hull */
  --background: oklch(0.145 0.02 250);
  --foreground: oklch(0.95 0.005 250);

  /* Surface: slightly lighter navy for cards/panels */
  --surface: oklch(0.20 0.02 250);
  --surface-foreground: var(--foreground);

  /* Overlay: modals/popovers, a touch lighter than surface */
  --overlay: oklch(0.23 0.02 250);
  --overlay-foreground: var(--foreground);

  /* Muted: steel-blue tone from the ship's tower */
  --muted: oklch(0.60 0.03 240);

  /* Default: subtle elevated bg (buttons, chips) */
  --default: oklch(0.27 0.02 250);
  --default-foreground: var(--foreground);

  /* Accent: rust/copper from the cargo containers */
  --accent: oklch(0.65 0.16 45);
  --accent-foreground: oklch(0.98 0 0);

  /* Secondary: teal/cyan from the ocean waves (available via custom token) */
  --secondary: oklch(0.72 0.14 200);
  --secondary-foreground: oklch(0.15 0.02 250);

  /* Status colors */
  --success: oklch(0.72 0.19 150);
  --success-foreground: oklch(0.15 0.02 250);

  --warning: oklch(0.78 0.14 76);
  --warning-foreground: oklch(0.15 0.02 250);

  --danger: oklch(0.60 0.20 25);
  --danger-foreground: oklch(0.98 0 0);

  /* Form fields */
  --field-background: oklch(0.22 0.02 250);
  --field-on-background: oklch(0.20 0.02 250);
  --field-foreground: var(--foreground);
  --field-placeholder: var(--muted);
  --field-border: transparent;

  /* Misc */
  --border: oklch(1 0 0 / 0%);
  --separator: oklch(0.25 0.02 250);
  --focus: var(--accent);
  --link: var(--secondary);
  --scrollbar: oklch(0.40 0.02 250);

  /* Segment */
  --segment: oklch(0.35 0.015 250);
  --segment-foreground: var(--foreground);

  /* Agent provider colors */
  --agent-claude-bg: oklch(0.22 0.04 45);
  --agent-claude-fg: oklch(0.65 0.12 45);
  --agent-openai-bg: oklch(0.22 0.03 160);
  --agent-openai-fg: oklch(0.65 0.10 160);
  --agent-gemini-bg: oklch(0.22 0.04 280);
  --agent-gemini-fg: oklch(0.65 0.12 280);

  /* Shadows (dark mode: no visible shadows) */
  --surface-shadow: 0 0 0 0 transparent inset;
  --overlay-shadow: 0 0 0 0 transparent inset;
  --field-shadow: 0 0 0 0 transparent inset;
}

/* -- Light theme -- */
.light,
[data-theme="light"] {
  /* Base: warm white with a hint of navy undertone */
  --background: oklch(0.97 0.005 250);
  --foreground: oklch(0.15 0.02 250);

  /* Surface: slightly off-white for cards/panels */
  --surface: oklch(1.00 0 0);
  --surface-foreground: var(--foreground);

  /* Overlay: pure white for modals/popovers */
  --overlay: oklch(1.00 0 0);
  --overlay-foreground: var(--foreground);

  /* Muted: steel-blue at higher lightness for secondary text */
  --muted: oklch(0.50 0.03 240);

  /* Default: light gray for buttons, chips */
  --default: oklch(0.92 0.005 250);
  --default-foreground: var(--foreground);

  /* Accent: same rust/copper, slightly deepened for light bg contrast */
  --accent: oklch(0.55 0.18 45);
  --accent-foreground: oklch(0.98 0 0);

  /* Secondary: teal/cyan, deepened for light bg readability */
  --secondary: oklch(0.50 0.14 200);
  --secondary-foreground: oklch(0.98 0 0);

  /* Status colors -- darkened for light bg contrast */
  --success: oklch(0.50 0.17 150);
  --success-foreground: oklch(0.98 0 0);

  --warning: oklch(0.60 0.16 76);
  --warning-foreground: oklch(0.15 0.02 250);

  --danger: oklch(0.52 0.22 25);
  --danger-foreground: oklch(0.98 0 0);

  /* Form fields */
  --field-background: oklch(0.96 0.005 250);
  --field-on-background: oklch(0.94 0.005 250);
  --field-foreground: var(--foreground);
  --field-placeholder: var(--muted);
  --field-border: oklch(0.85 0.01 250);

  /* Misc */
  --border: oklch(0.88 0.01 250);
  --separator: oklch(0.88 0.01 250);
  --focus: var(--accent);
  --link: var(--secondary);
  --scrollbar: oklch(0.78 0.01 250);

  /* Segment */
  --segment: oklch(0.90 0.005 250);
  --segment-foreground: var(--foreground);

  /* Agent provider colors */
  --agent-claude-bg: oklch(0.94 0.03 45);
  --agent-claude-fg: oklch(0.45 0.14 45);
  --agent-openai-bg: oklch(0.94 0.03 160);
  --agent-openai-fg: oklch(0.45 0.12 160);
  --agent-gemini-bg: oklch(0.94 0.03 280);
  --agent-gemini-fg: oklch(0.45 0.14 280);

  /* Shadows (light mode: subtle elevation) */
  --surface-shadow: 0 1px 3px 0 oklch(0 0 0 / 8%) inset;
  --overlay-shadow: 0 4px 16px 0 oklch(0 0 0 / 12%);
  --field-shadow: 0 1px 2px 0 oklch(0 0 0 / 5%) inset;
}

@theme {
  /* Map HeroUI semantic tokens to Tailwind utilities */
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-surface: var(--surface);
  --color-surface-foreground: var(--surface-foreground);
  --color-overlay: var(--overlay);
  --color-overlay-foreground: var(--overlay-foreground);
  --color-muted: var(--muted);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-success: var(--success);
  --color-warning: var(--warning);
  --color-danger: var(--danger);
  --color-border: var(--border);
  --color-separator: var(--separator);
  --color-focus: var(--focus);
  --color-link: var(--link);

  /* Shipyard-specific utility colors for manual use */
  --color-hull: oklch(0.35 0.03 240);
  --color-hull-light: oklch(0.45 0.03 240);
  --color-wave: oklch(0.72 0.14 200);
  --color-wave-light: oklch(0.82 0.10 200);
  --color-rust: oklch(0.65 0.16 45);
  --color-rust-light: oklch(0.75 0.14 45);

  /* Agent provider colors */
  --color-agent-claude-bg: var(--agent-claude-bg);
  --color-agent-claude-fg: var(--agent-claude-fg);
  --color-agent-openai-bg: var(--agent-openai-bg);
  --color-agent-openai-fg: var(--agent-openai-fg);
  --color-agent-gemini-bg: var(--agent-gemini-bg);
  --color-agent-gemini-fg: var(--agent-gemini-fg);

  /* Code block background */
  --color-code-block: oklch(0.12 0.02 250);

  /* Wave pulse animation for thinking indicator */
  --animate-wave-pulse: wave-pulse 1.8s ease-in-out infinite;

  /* ASCII ship sail animation (stays within wave bounds) */
  --animate-sail: sail 5s linear infinite;

  /* ASCII ship vertical bob (subtle wave-riding bounce) */
  --animate-ship-bob: ship-bob 1.2s ease-in-out infinite;

  /* Wave shimmer animation for ASCII waves */
  --animate-wave-shimmer: wave-shimmer 2.4s ease-in-out infinite;

  /* Wave shimmer — delayed variant for staggered wave lines */
  --animate-wave-shimmer-delayed: wave-shimmer 2.4s ease-in-out 0.8s infinite;

  /* Wave shimmer — slow variant for deepest wave line */
  --animate-wave-shimmer-slow: wave-shimmer 3.2s ease-in-out 0.4s infinite;

  /* Ring sweep animation for pulsing ring thinking indicator */
  --animate-ring-sweep: ring-sweep 3s linear infinite;

  /* Shimmer sweep animation for code skeleton loading */
  --animate-shimmer: shimmer 2s ease-in-out infinite;
}

/*
 * Syntax highlighting for rehype-highlight
 *
 * Custom theme matching the Shipyard dark palette.
 * Uses oklch colors from the theme tokens above.
 * Applied inside code blocks rendered by react-markdown.
 */

.hljs {
  color: oklch(0.90 0.01 250);
  background: transparent;
}

.hljs-keyword,
.hljs-selector-tag,
.hljs-built_in,
.hljs-name,
.hljs-tag {
  color: oklch(0.75 0.12 300);
}

.hljs-string,
.hljs-title,
.hljs-section,
.hljs-attribute,
.hljs-literal,
.hljs-template-tag,
.hljs-template-variable,
.hljs-type {
  color: oklch(0.72 0.14 200);
}

.hljs-number,
.hljs-symbol,
.hljs-bullet,
.hljs-link {
  color: oklch(0.65 0.16 45);
}

.hljs-variable,
.hljs-params,
.hljs-regexp {
  color: oklch(0.85 0.08 80);
}

.hljs-comment,
.hljs-quote {
  color: oklch(0.50 0.02 240);
  font-style: italic;
}

.hljs-meta,
.hljs-meta .hljs-keyword {
  color: oklch(0.60 0.20 25);
}

.hljs-deletion {
  color: oklch(0.60 0.20 25);
  background: oklch(0.20 0.04 25);
}

.hljs-addition {
  color: oklch(0.72 0.19 150);
  background: oklch(0.20 0.04 150);
}

.hljs-title.class_,
.hljs-title.function_ {
  color: oklch(0.78 0.14 76);
}

.hljs-attr {
  color: oklch(0.72 0.14 200);
}

.hljs-property {
  color: oklch(0.82 0.06 200);
}

.hljs-emphasis {
  font-style: italic;
}

.hljs-strong {
  font-weight: 700;
}

/*
 * Light-mode syntax highlighting overrides
 * Darkened values to maintain readable contrast on light backgrounds.
 */

.light .hljs,
[data-theme="light"] .hljs {
  color: oklch(0.25 0.02 250);
}

.light .hljs-keyword,
.light .hljs-selector-tag,
.light .hljs-built_in,
.light .hljs-name,
.light .hljs-tag,
[data-theme="light"] .hljs-keyword,
[data-theme="light"] .hljs-selector-tag,
[data-theme="light"] .hljs-built_in,
[data-theme="light"] .hljs-name,
[data-theme="light"] .hljs-tag {
  color: oklch(0.45 0.16 300);
}

.light .hljs-string,
.light .hljs-title,
.light .hljs-section,
.light .hljs-attribute,
.light .hljs-literal,
.light .hljs-template-tag,
.light .hljs-template-variable,
.light .hljs-type,
[data-theme="light"] .hljs-string,
[data-theme="light"] .hljs-title,
[data-theme="light"] .hljs-section,
[data-theme="light"] .hljs-attribute,
[data-theme="light"] .hljs-literal,
[data-theme="light"] .hljs-template-tag,
[data-theme="light"] .hljs-template-variable,
[data-theme="light"] .hljs-type {
  color: oklch(0.42 0.14 200);
}

.light .hljs-number,
.light .hljs-symbol,
.light .hljs-bullet,
.light .hljs-link,
[data-theme="light"] .hljs-number,
[data-theme="light"] .hljs-symbol,
[data-theme="light"] .hljs-bullet,
[data-theme="light"] .hljs-link {
  color: oklch(0.50 0.18 45);
}

.light .hljs-variable,
.light .hljs-params,
.light .hljs-regexp,
[data-theme="light"] .hljs-variable,
[data-theme="light"] .hljs-params,
[data-theme="light"] .hljs-regexp {
  color: oklch(0.50 0.10 80);
}

.light .hljs-comment,
.light .hljs-quote,
[data-theme="light"] .hljs-comment,
[data-theme="light"] .hljs-quote {
  color: oklch(0.55 0.02 240);
  font-style: italic;
}

.light .hljs-meta,
.light .hljs-meta .hljs-keyword,
[data-theme="light"] .hljs-meta,
[data-theme="light"] .hljs-meta .hljs-keyword {
  color: oklch(0.48 0.18 25);
}

.light .hljs-deletion,
[data-theme="light"] .hljs-deletion {
  color: oklch(0.48 0.20 25);
  background: oklch(0.92 0.04 25);
}

.light .hljs-addition,
[data-theme="light"] .hljs-addition {
  color: oklch(0.40 0.17 150);
  background: oklch(0.92 0.04 150);
}

.light .hljs-title.class_,
.light .hljs-title.function_,
[data-theme="light"] .hljs-title.class_,
[data-theme="light"] .hljs-title.function_ {
  color: oklch(0.52 0.14 76);
}

.light .hljs-attr,
[data-theme="light"] .hljs-attr {
  color: oklch(0.42 0.14 200);
}

.light .hljs-property,
[data-theme="light"] .hljs-property {
  color: oklch(0.45 0.08 200);
}

/*
 * ASCII ship sail animation: ship translates left-to-right within wave bounds.
 * Uses percentage-based left values so the ship never overshoots the tildes.
 * The ship is ~3ch wide; the container is ~13ch, so max left is ~77% (10/13).
 */
@keyframes sail {
  0% {
    left: -3ch;
  }
  5% {
    left: 0%;
  }
  95% {
    left: calc(100% - 3ch);
  }
  100% {
    left: calc(100% + 0.5ch);
  }
}

/* Subtle vertical bob for the ship riding waves (2px amplitude) */
@keyframes ship-bob {
  0%,
  100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-2px);
  }
}

/* Subtle opacity shimmer on ASCII wave characters */
@keyframes wave-shimmer {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0.6;
  }
}

/* Wave pulse animation for the thinking indicator */
@keyframes wave-pulse {
  0%,
  100% {
    width: 2rem;
    transform: translateY(0);
    opacity: var(--wave-opacity);
  }
  50% {
    width: 3rem;
    transform: translateY(-2px);
    opacity: calc(var(--wave-opacity) + 0.2);
  }
}

/* Pulsing ring thinking indicator: animated conic-gradient sweep */
@property --ring-angle {
  syntax: '<angle>';
  initial-value: 0deg;
  inherits: false;
}

@keyframes ring-sweep {
  to {
    --ring-angle: 360deg;
  }
}

.ring-sweep-gradient {
  background: conic-gradient(
    from var(--ring-angle),
    transparent 0deg,
    var(--color-secondary) 90deg,
    transparent 180deg
  );
  mask: radial-gradient(
    farthest-side,
    transparent calc(100% - 2px),
    #000 calc(100% - 2px)
  );
  -webkit-mask: radial-gradient(
    farthest-side,
    transparent calc(100% - 2px),
    #000 calc(100% - 2px)
  );
}

/* Code shimmer: diagonal gradient sweep for skeleton loading bars */
@keyframes shimmer {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}

/* Respect reduced motion preference for all animations */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Visible focus indicator for programmatically focusable containers */
.focus-visible-ring:focus-visible {
  outline: 2px solid var(--focus);
  outline-offset: -2px;
  border-radius: 0.5rem;
}
